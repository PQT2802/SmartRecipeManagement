<UserControl x:Class="SmartRecipe.Wpf.Views.LoginView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             Background="{StaticResource BackgroundBrush}">

    <Grid>
        <!-- Background Gradient -->
        <Grid.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="#F5F5F5" Offset="0"/>
                <GradientStop Color="#E8F4FD" Offset="1"/>
            </LinearGradientBrush>
        </Grid.Background>

        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Main Login Container -->
        <Border Grid.Row="1" 
                Background="White"
                CornerRadius="16"
                MaxWidth="450"
                HorizontalAlignment="Center"
                Padding="40,40,40,30"
                BorderBrush="#E0E0E0"
                BorderThickness="1">

            <Border.Effect>
                <DropShadowEffect Color="#20000000" BlurRadius="20" ShadowDepth="8" Opacity="0.15"/>
            </Border.Effect>

            <StackPanel>
                <!-- Logo/Brand Section -->
                <StackPanel HorizontalAlignment="Center" Margin="0,0,0,30">
                    <!-- App Icon -->
                    <Border Background="{StaticResource PrimaryBrush}"
                            Width="64" Height="64"
                            CornerRadius="32"
                            HorizontalAlignment="Center"
                            Margin="0,0,0,16">
                        <TextBlock Text="🍳" 
                                  FontSize="32"
                                  HorizontalAlignment="Center"
                                  VerticalAlignment="Center"/>
                    </Border>

                    <!-- Welcome Text -->
                    <TextBlock Text="Welcome Back!" 
                              FontSize="32"
                              FontWeight="Bold"
                              Foreground="{StaticResource TextPrimaryBrush}"
                              HorizontalAlignment="Center"
                              Margin="0,0,0,8"/>

                    <TextBlock Text="Sign in to continue cooking amazing recipes" 
                              FontSize="14"
                              Foreground="{StaticResource TextSecondaryBrush}"
                              HorizontalAlignment="Center"/>
                </StackPanel>

                <!-- Email Field with Icon -->
                <StackPanel Margin="0,0,0,24">
                    <TextBlock Text="Email Address" 
                              FontWeight="SemiBold"
                              FontSize="14"
                              Foreground="{StaticResource TextPrimaryBrush}"
                              Margin="0,0,0,8"/>

                    <Border BorderBrush="{StaticResource PrimaryBrush}"
                            BorderThickness="1"
                            CornerRadius="8"
                            Background="White">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <!-- Email Icon -->
                            <TextBlock Grid.Column="0" 
                                      Text="✉️"
                                      FontSize="16"
                                      VerticalAlignment="Center"
                                      Margin="16,0,8,0"
                                      Foreground="{StaticResource TextSecondaryBrush}"/>

                            <!-- Email TextBox -->
                            <TextBox Grid.Column="1"
                                    Text="{Binding Email, UpdateSourceTrigger=PropertyChanged}"
                                    Padding="0,16,16,16"
                                    FontSize="14"
                                    BorderThickness="0"
                                    Background="Transparent"
                                    VerticalAlignment="Center"
                                    x:Name="EmailTextBox">
                                <TextBox.Style>
                                    <Style TargetType="TextBox">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="TextBox">
                                                    <ScrollViewer x:Name="PART_ContentHost"/>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </TextBox.Style>
                            </TextBox>
                        </Grid>

                        <!-- Focus Border Effect -->
                        <Border.Style>
                            <Style TargetType="Border">
                                <Setter Property="BorderBrush" Value="#E0E0E0"/>
                                <Style.Triggers>
                                    <Trigger Property="IsKeyboardFocusWithin" Value="True">
                                        <Setter Property="BorderBrush" Value="{StaticResource AccentBrush}"/>
                                        <Setter Property="BorderThickness" Value="2"/>
                                    </Trigger>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="BorderBrush" Value="{StaticResource AccentLightBrush}"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Border.Style>
                    </Border>
                </StackPanel>

                <!-- Password Field with Icon and Show/Hide -->
                <StackPanel Margin="0,0,0,24">
                    <TextBlock Text="Password" 
                              FontWeight="SemiBold"
                              FontSize="14"
                              Foreground="{StaticResource TextPrimaryBrush}"
                              Margin="0,0,0,8"/>

                    <Border BorderBrush="{StaticResource PrimaryBrush}"
                            BorderThickness="1"
                            CornerRadius="8"
                            Background="White">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <!-- Password Icon -->
                            <TextBlock Grid.Column="0" 
                                      Text="🔒"
                                      FontSize="16"
                                      VerticalAlignment="Center"
                                      Margin="16,0,8,0"
                                      Foreground="{StaticResource TextSecondaryBrush}"/>

                            <!-- Password Field -->
                            <PasswordBox Grid.Column="1"
                                        x:Name="PasswordBox"
                                        Padding="0,16,8,16"
                                        FontSize="14"
                                        BorderThickness="0"
                                        Background="Transparent"
                                        VerticalAlignment="Center">
                                <PasswordBox.Style>
                                    <Style TargetType="PasswordBox">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="PasswordBox">
                                                    <ScrollViewer x:Name="PART_ContentHost"/>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </PasswordBox.Style>
                            </PasswordBox>

                            <!-- Show/Hide Password Button -->
                            <Button Grid.Column="2"
                                   Content="👁️"
                                   FontSize="14"
                                   Background="Transparent"
                                   BorderThickness="0"
                                   Padding="12,0"
                                   Foreground="{StaticResource TextSecondaryBrush}"
                                   Cursor="Hand"
                                   ToolTip="Show/Hide Password">
                                <Button.Style>
                                    <Style TargetType="Button">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="Button">
                                                    <Border Background="{TemplateBinding Background}" 
                                                           CornerRadius="4"
                                                           Padding="{TemplateBinding Padding}">
                                                        <ContentPresenter HorizontalAlignment="Center" 
                                                                        VerticalAlignment="Center"/>
                                                    </Border>
                                                    <ControlTemplate.Triggers>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter Property="Background" Value="#F0F0F0"/>
                                                        </Trigger>
                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </Button.Style>
                            </Button>
                        </Grid>

                        <!-- Focus Border Effect -->
                        <Border.Style>
                            <Style TargetType="Border">
                                <Setter Property="BorderBrush" Value="#E0E0E0"/>
                                <Style.Triggers>
                                    <Trigger Property="IsKeyboardFocusWithin" Value="True">
                                        <Setter Property="BorderBrush" Value="{StaticResource AccentBrush}"/>
                                        <Setter Property="BorderThickness" Value="2"/>
                                    </Trigger>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="BorderBrush" Value="{StaticResource AccentLightBrush}"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Border.Style>
                    </Border>
                </StackPanel>

                <!-- Remember Me and Forgot Password -->
                <Grid Margin="0,0,0,32">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <!-- Remember Me -->
                    <StackPanel Grid.Column="0" Orientation="Horizontal">
                        <CheckBox x:Name="RememberMeCheckBox"
                                 VerticalAlignment="Center"
                                 Margin="0,0,8,0"/>
                        <TextBlock Text="Remember me"
                                  FontSize="13"
                                  Foreground="{StaticResource TextSecondaryBrush}"
                                  VerticalAlignment="Center"/>
                    </StackPanel>

                    <!-- Forgot Password -->
                    <Button Grid.Column="1"
                           Content="Forgot Password?"
                           Style="{StaticResource LinkButtonStyle}"
                           FontSize="13"
                           Padding="0"
                           Command="{Binding ForgotPasswordCommand}"/>
                </Grid>

                <!-- Error Message with Animation -->
                <Border Background="#FFF3F3"
                       BorderBrush="#F5C6CB"
                       BorderThickness="1"
                       CornerRadius="6"
                       Padding="12,8"
                       Margin="0,0,0,20"
                       Visibility="{Binding ErrorMessage, Converter={StaticResource StringToVisibilityConverter}}">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="⚠️" 
                                  FontSize="14"
                                  Margin="0,0,8,0"
                                  VerticalAlignment="Center"/>
                        <TextBlock Text="{Binding ErrorMessage}"
                                  Foreground="#721C24"
                                  FontSize="13"
                                  TextWrapping="Wrap"
                                  VerticalAlignment="Center"/>
                    </StackPanel>
                </Border>

                <!-- Login Button with Loading State -->
                <Button Command="{Binding LoginCommand}"
                       Height="48"
                       FontSize="16"
                       FontWeight="SemiBold"
                       Background="{StaticResource PrimaryBrush}"
                       Foreground="White"
                       BorderThickness="0"
                       Cursor="Hand"
                       Margin="0,0,0,24"
                       IsEnabled="{Binding IsLoading, Converter={StaticResource InverseBooleanConverter}}">

                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">
                                        <Border Background="{TemplateBinding Background}" 
                                               CornerRadius="8"
                                               Padding="{TemplateBinding Padding}">
                                            <Grid>
                                                <!-- Normal Content -->
                                                <ContentPresenter x:Name="NormalContent"
                                                                HorizontalAlignment="Center" 
                                                                VerticalAlignment="Center"
                                                                Visibility="{Binding IsLoading, Converter={StaticResource InverseBoolToVisibilityConverter}}"/>

                                                <!-- Loading Content -->
                                                <StackPanel x:Name="LoadingContent"
                                                          Orientation="Horizontal"
                                                          HorizontalAlignment="Center"
                                                          VerticalAlignment="Center"
                                                          Visibility="{Binding IsLoading, Converter={StaticResource BoolToVisibilityConverter}}">
                                                    <TextBlock Text="🔄" 
                                                              FontSize="16"
                                                              Margin="0,0,8,0"
                                                              RenderTransformOrigin="0.5,0.5">
                                                        <TextBlock.RenderTransform>
                                                            <RotateTransform x:Name="LoadingRotation"/>
                                                        </TextBlock.RenderTransform>
                                                        <TextBlock.Triggers>
                                                            <EventTrigger RoutedEvent="Loaded">
                                                                <BeginStoryboard>
                                                                    <Storyboard RepeatBehavior="Forever">
                                                                        <DoubleAnimation Storyboard.TargetName="LoadingRotation"
                                                                                       Storyboard.TargetProperty="Angle"
                                                                                       From="0" To="360"
                                                                                       Duration="0:0:1"/>
                                                                    </Storyboard>
                                                                </BeginStoryboard>
                                                            </EventTrigger>
                                                        </TextBlock.Triggers>
                                                    </TextBlock>
                                                    <TextBlock Text="Signing In..." 
                                                              FontSize="16"
                                                              Foreground="White"/>
                                                </StackPanel>
                                            </Grid>
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter Property="Background" Value="{StaticResource AccentDarkBrush}"/>
                                            </Trigger>
                                            <Trigger Property="IsPressed" Value="True">
                                                <Setter Property="Background" Value="{StaticResource AccentDarkBrush}"/>
                                                <Setter Property="RenderTransform">
                                                    <Setter.Value>
                                                        <ScaleTransform ScaleX="0.98" ScaleY="0.98"/>
                                                    </Setter.Value>
                                                </Setter>
                                            </Trigger>
                                            <Trigger Property="IsEnabled" Value="False">
                                                <Setter Property="Background" Value="#CCCCCC"/>
                                                <Setter Property="Foreground" Value="#888888"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                            <Setter Property="Content" Value="Sign In"/>
                        </Style>
                    </Button.Style>
                </Button>

                <!-- Divider -->
                <Grid Margin="0,0,0,24">
                    <Border Height="1" Background="#E0E0E0"/>
                    <TextBlock Text="or" 
                              Background="White"
                              Padding="12,0"
                              FontSize="12"
                              Foreground="{StaticResource TextSecondaryBrush}"
                              HorizontalAlignment="Center"/>
                </Grid>

                <!-- Social Login Options -->
                <StackPanel Orientation="Horizontal" 
                           HorizontalAlignment="Center"
                           Margin="0,0,0,24">

                    <!-- Google Login -->
                    <Button Width="48" Height="48"
                           Background="White"
                           BorderBrush="#E0E0E0"
                           BorderThickness="1"
                           Margin="0,0,12,0"
                           ToolTip="Sign in with Google">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}" 
                                                   BorderBrush="{TemplateBinding BorderBrush}"
                                                   BorderThickness="{TemplateBinding BorderThickness}"
                                                   CornerRadius="8"
                                                   Padding="{TemplateBinding Padding}">
                                                <ContentPresenter HorizontalAlignment="Center" 
                                                                VerticalAlignment="Center"/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="Background" Value="#F5F5F5"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Button.Style>
                        <TextBlock Text="🔍" FontSize="20"/>
                    </Button>

                    <!-- Facebook Login -->
                    <Button Width="48" Height="48"
                           Background="#1877F2"
                           BorderThickness="0"
                           Margin="0,0,12,0"
                           ToolTip="Sign in with Facebook">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}" 
                                                   CornerRadius="8"
                                                   Padding="{TemplateBinding Padding}">
                                                <ContentPresenter HorizontalAlignment="Center" 
                                                                VerticalAlignment="Center"/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="Background" Value="#166FE5"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Button.Style>
                        <TextBlock Text="📘" FontSize="20"/>
                    </Button>

                    <!-- Apple Login -->
                    <Button Width="48" Height="48"
                           Background="#000000"
                           BorderThickness="0"
                           ToolTip="Sign in with Apple">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}" 
                                                   CornerRadius="8"
                                                   Padding="{TemplateBinding Padding}">
                                                <ContentPresenter HorizontalAlignment="Center" 
                                                                VerticalAlignment="Center"/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="Background" Value="#333333"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Button.Style>
                        <TextBlock Text="🍎" FontSize="20"/>
                    </Button>
                </StackPanel>

                <!-- Register Link -->
                <TextBlock HorizontalAlignment="Center"
                          FontSize="14">
                    <Run Text="Don't have an account? " 
                         Foreground="{StaticResource TextSecondaryBrush}"/>
                    <Hyperlink Command="{Binding NavigateToRegisterCommand}"
                              Foreground="{StaticResource PrimaryBrush}"
                              TextDecorations="None"
                              FontWeight="SemiBold">
                        <Run Text="Create Account"/>
                    </Hyperlink>
                </TextBlock>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>